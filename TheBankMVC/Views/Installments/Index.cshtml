@model IEnumerable<BudgetManager.ViewModels.InstallmentViewModel>

@{
    ViewData["Title"] = "Upcoming EMIs";
}

<h1>@ViewData["Title"]</h1>

@if (ViewBag.Message != null)
{
    <script type="text/javascript">

        window.onload = function () {
            alert("@ViewBag.Message");
        };
    </script>

}

<table class="table table-hover">
    <thead>
        <tr class="table-dark">
            <th>
                @Html.DisplayNameFor(model => model.InstallmentStatus)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EMIType)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.GroupName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.UserAccountName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.InstallmentNo)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DueDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PrincipalAmount)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.InterestAmount)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EMIAmount)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Fine)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Difference)
            </th>
            <th>
                @Html.DisplayName("DueAmt")
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr class="table-secondary">
                <td>
                    @Html.ActionLink(((Enumeration.InstallmentStatus)item.InstallmentStatus).ToString(), "Details", new { Id = item.Id }, new { @class = "btn-link" })
                </td>
                <td>
                    @((Enumeration.EMIType)item.EMIType)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.GroupName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.UserAccountName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.InstallmentNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DueDate)
                </td>
                <td>
                    @item.PrincipalAmount.ToString("0.00")
                </td>
                <td>
                    @item.InterestAmount.ToString("0.00")
                </td>
                <td>
                    @item.EMIAmount.ToString("0.00")
                </td>
                <td>
                    @item.Fine.ToString("0.00")
                </td>
                <td>
                    @item.Difference.ToString("0.00")
                </td>
                <td>
                    @((item.EMIAmount + item.Fine + item.Difference).ToString("0.00"))
                </td>
                <td>
                    @Html.ActionLink("Pay", "Paid", new { Id = item.Id }, new { @class = "btn-link" })
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {

    @*<script type="text/javascript">
    ShowModelPopUp = function () {
    window.showModalDialog('/Installments/OpenModelPopup', "WindowPopup", 'width=400px,height=400px');
    }
    ShowPopup = function () {
    window.open('/Installments/OpenPopup', "PopupWindow", 'width=400px,height=400px,top=150,left=250');
    }
    </script>*@

    @*<script type="text/javascript">
    ShowValidationPopUp = function () {
    window.onload = function () {
    alert("@ViewBag.Message");
    };
    }
    </script>*@
}